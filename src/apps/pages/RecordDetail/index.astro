---
import BackButton from '@components/BackButton';
import Container from '@components/Container.astro';
import RelatedEvents from '@apps/pages/RecordDetail/RelatedEvents.astro';
import RelatedItems from '@apps/pages/RecordDetail/RelatedItems.astro';
import RelatedInstances from '@apps/pages/RecordDetail/RelatedInstances.astro';
import RelatedOrganizations from '@apps/pages/RecordDetail/RelatedOrganizations.astro';
import RelatedPeople from '@apps/pages/RecordDetail/RelatedPeople.astro';
import RelatedWorks from '@apps/pages/RecordDetail/RelatedWorks.astro';
import RelatedTaxonomies from '@apps/pages/RecordDetail/RelatedTaxonomies.astro';
import RelatedMedia from '@apps/pages/RecordDetail/RelatedMedia.astro';
import GeoHeader from '@apps/pages/RecordDetail/GeoHeader.astro';
import { getTranslations } from '@backend/i18n';

interface Props {
  excludes: string[];
  geometry?: any;
  lang: string;
  model: string;
  name: string;
  record: any;
}

const { excludes, geometry, lang, model, name, record } = Astro.props;
const { t } = await getTranslations(lang);
---

<div class="bg-primary w-full pb-6">
  <Container>
    <div class="pb-4 flex items-center gap-2">
      <BackButton
        id='backButton'
        size={24}
      />
      <span class="uppercase font-semibold">{t('backTo', { label: t(model) })}</span>
    </div>
    <h1 class="text-5xl font-header">{name}</h1>
  </Container>
</div>
<Container className='py-6'>
  <div class='divide-y divide-solid divide-[#e5e5e5]'>
    <GeoHeader
      excludes={excludes}
      geometry={geometry}
      lang={lang}
      model={model}
      name={name}
      record={record}
      server:defer
    />
    <RelatedMedia
      lang={lang}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedEvents
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedInstances
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedItems
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedOrganizations
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedPeople
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedTaxonomies
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
    <RelatedWorks
      excludes={excludes}
      model={model}
      uuid={record.uuid}
      server:defer
    />
  </div>
</Container>

<script>
  const backButton = document.querySelector('#backButton')
  backButton.addEventListener('click', () => history.back())
</script>
