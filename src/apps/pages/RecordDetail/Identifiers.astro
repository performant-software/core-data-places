---
import { getTranslations } from "@backend/i18n";
import _ from 'underscore';

const { record, authorities } = Astro.props

const lang = Astro.currentLocale;
const { t } = await getTranslations(lang);
---
{record.web_identifiers && (
  <>
    <div class="py-6">
        <h2 class="capitalize text-lg font-semibold">{t('webAuthorities')}</h2>
        <div class="text-neutral-800 break-words flex flex-col gap-2 pt-4">              
            { _.map(record.web_identifiers, (auth) => {
                const authority = _.find(authorities, (a) => (a.source_type === auth.web_authority?.source_type))
                return authority ? ( 
                    <a href={`${authority.base_url}/${auth.identifier}`} class="underline">{`${auth.web_authority?.source_type}: ${auth.identifier}`}</a>
                ) : (
                    <span>{`${auth.web_authority?.source_type}: ${auth.identifier}`}</span>
                )
            })}
        </div>
    </div>
  </>
)}